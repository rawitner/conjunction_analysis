---
#output: rmarkdown::github_document
#always_allow_html: true
output: html_document
---
## November 25 worst offender analysis

```{r warning=F, message=F, echo=F}
library(tidyverse)
library(kableExtra)
library(knitr)
library(DT)
mcma_objs = readRDS("mcma_objs")
all_conjs_expanded = readRDS("all_conjs_expanded")

top50 = mcma_objs %>% 
  arrange(desc(totalRisk)) %>%
  head(50)

top50 = all_conjs_expanded %>%
  filter(noradId %in% top50$noradId) %>%
  group_by(noradId) %>%
  summarise(numConjs = n(),
            `closestApproach(km)` = min(Range),
            avgNumOpSats = mean(numOpSats),
            medianNumOpSats = median(numOpSats),
            `avgPersistenceOfConjAlt(yrs)` = mean(persistence),
            `medianPersistenceOfConjAlt(yrs)` = median(persistence)) %>% 
  right_join(top50, by="noradId")
```
```{r echo=F, warning=F, message=F}
head(top50) %>% DT::datatable() #%>% kable() %>% kable_styling()
```

